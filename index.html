<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
		   <script type="text/javascript" src="js/jquery-1.8.3.js" ></script>
		    <script type="text/javascript" src="js/mui.js" ></script>
		    <script type="text/javascript" src="js/js.js" ></script>
		    
		    <link rel="stylesheet" href="css/style.css" />
		    <link rel="stylesheet" href="css/mui.css" />
		    <link rel="stylesheet" href="css/media.css" />
		    <script src="js/butdj.js"></script>
    <script type="text/javascript" charset="UTF-8">
      	mui.init();
      	(function($, doc) {
			$.ready(function(){
				mui('.mui-scroll-wrapper').scroll({
						indicators: true, //是否显示滚动条
						deceleration: 0.0005 //flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006
				});

				//表单验证                我把弹框调用放到了这里面了只有这样才好做验证 
					reyanzheng();
						function reyanzheng(){
							var shoujian = document.getElementById("shoujian");
							var dizhi = document.getElementById("dizhi");
							var lianxi = document.getElementById("lianxi");
							var bat = document.getElementById("imageInput");
							var swt = document.getElementById("imageInputa");						
							var btn = document.getElementById("btyd");
							bat.onclick =  function(){ 
								yanzengc();
							}
							swt.onclick =  function(){ 
								yanzengd();
							}
							shoujian.onblur =  function(){ 
								yanzeng();
							}
							lianxi.onblur =  function(){ 
								yanzenga();
							}
							dizhi.onblur =  function(){ 
								yanzengb();
							}	
							  function yanzengc(){ 
							  	var bat = document.getElementById("imageInput").value;
								if(bat.length == 0) 
								{ 
									mui.alert("车主身份证正面照不能为空");
									return false; 
								}
								return true;								
							}
				            function yanzengd(){   
								var swt = document.getElementById("imageInputa").value;
								if(swt.length == 0) 
								{ 
									mui.alert("车主身份证反面照不能为空");
									return false; 
								}
								return true;								
							}
				            function yanzeng(){   
								var name = shoujian.value;
								if(name ==  null || name == ''){
									mui.alert("收件人不能为空");
									return false;   
								}
								return true;
							}
				            function yanzenga(){   
								var name = lianxi.value;
								if(name ==  null || name == ''){
									mui.alert("电话不能为空");
									return false;   
								}
								if(!(/^1[34578]\d{9}$/.test(name))){ 
							        mui.alert("手机号码有误，请重填");  
							        return false; 
							   } 
								return true;
							}
				            function yanzengb(){   
								var name = dizhi.value;
								if(name ==  null || name == ''){
									mui.alert("收货地址不能为空");
									return false;   
								}
								return true;
							}
				         
				            
				            btn.onclick = function(){
				            	if(yanzeng() == true &&　yanzenga() ==true && yanzengb() == true && yanzengc() == true && yanzengd() == true){
				            		btn.setAttribute("disabled", "");
				            		dlkjyle();
				            	}else{
				            		return false;
				            		btn.style.backgroundColor = "darkgrey";
				            	}
				            }
						}
//表单验证

			})			
		})(mui, document)
		
				
				//蒙版 
function modal_hy(){
	var modal=document.createElement('div');
	modal.id="b_modal";
	modal.className="modal";
	document.body.appendChild(modal);
}
//登录框
function dlkjyle(){
	//蒙版层
	modal_hy();
	var modal=document.getElementById('b_modal');
	//支付框架
	var bof=document.createElement('div');
	bof.id = "box";
	bof.className = "box";
	var html='<h3><span><img src="images/tankuang.png"></span>温馨提示</h3>'+
    '<a href="#" id="close"><img src="images/cha.png"></a>'+
    '<div class="bot"><p>由于保险属于第三方销售，如有疑问请联系第<br>三方客服。客服电话 </p>'+
    '<p><img src="images/daixuankuang.png" id="gouxuan">我同意<a href="#" id="xieyi">《车保汇用户支付协议》</a></p>'+
    '<button type="button" class="btn" id="">去支付</button></div>';
	bof.innerHTML=html;
	document.body.appendChild(bof);
	//选取
	var box=document.getElementById('box');
	var close=document.getElementById('close');
	var xieyi=document.getElementById('xieyi');
	var xieyi=document.getElementById('xieyi');
	var gouxuan = document.getElementById("gouxuan");
	var onoff = true;
	gouxuan.onclick = function(){
		if(onoff){
			gouxuan.setAttribute('src','images/xuanzhong.png');
			onoff = false;
		}else{
			gouxuan.setAttribute('src','images/daixuankuang.png');
			onoff = true;
		}	
	}
	/*var title=document.getElementsByTagName('h3')[0];
	but.onclick=function(){
			oDiv1.style.display="block";
			box.style.display="block";
	}

	var se=document.getElementById('close');
	se.onclick=function(){
		oDiv1.style.display="none";
		box.style.display="none";	
	}*/
	modal.style.display="block";
	box.style.display="block";
	close.onclick=function(){
		document.body.removeChild(modal);
		
		document.body.removeChild(bof);		
	}
	xieyi.onclick = function(){
		document.body.removeChild(modal);		
		document.body.removeChild(bof);	
		yyckd();
	}
}


function yyckd(){
	//蒙版层
	modal_hy();
	
	var modal=document.getElementById('b_modal');
	
	// 协议框架
	var boxt=document.createElement('div');
	boxt.id = "box";
	boxt.className = "box";
	var html='<h3><span><img src="images/tankuang.png"></span>温馨提示</h3>'+
    '<div class="bty"><p>由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745</p>'+
    '<p>由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745</p>'+
    '<p>由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745由于保险属于第三方销售，如有疑问请联系第三方客服客服电话 023-36498745</p>'+
    '<button type="button" class="btn" id="btn">确定</button></div>';
	boxt.innerHTML=html;
	document.body.appendChild(boxt);
	
	//选取
	var boyx=document.getElementById('box');
	var close=document.getElementById('btn');
	var title=document.getElementsByTagName('h3')[0];
	/*but.onclick=function(){
			oDiv1.style.display="block";
			box.style.display="block";
	}

	var se=document.getElementById('close');
	se.onclick=function(){
		oDiv1.style.display="none";
		box.style.display="none";	
	}*/
	modal.style.display="block";
	boyx.style.display="block";
	
	close.onclick=function(){
		document.body.removeChild(modal);
		
		document.body.removeChild(boxt);
	}
}



/*上传图片js*/

$(function () {
$("#imageInput").uploadPreview({ Img: "imagePreview", Width: 45, Height: 45 });
$("#imageInputa").uploadPreview({ Img: "imagePreviewa", Width: 45, Height: 45 });
$("#imageInputb").uploadPreview({ Img: "imagePreviewb", Width: 45, Height: 45 });
$("#imageInputc").uploadPreview({ Img: "imagePreviewc", Width: 45, Height: 45 });
$("#imageInputd").uploadPreview({ Img: "imagePreviewd", Width: 45, Height: 45 });
});

jQuery.fn.extend({
    uploadPreview: function (opts) {
        var _self = this,
            _this = $(this);
        opts = jQuery.extend({
            Img: "ImgPr",
            Width: 100,
            Height: 100,
            ImgType: ["gif", "jpeg", "jpg", "bmp", "png"],
            Callback: function () {}
        }, opts || {});
        _self.getObjectURL = function (file) {
            var url = null;
            if (window.createObjectURL != undefined) {
                url = window.createObjectURL(file)
            } else if (window.URL != undefined) {
                url = window.URL.createObjectURL(file)
            } else if (window.webkitURL != undefined) {
                url = window.webkitURL.createObjectURL(file)
            }
            return url
        };
        _this.change(function () {
            if (this.value) {
                if (!RegExp("\.(" + opts.ImgType.join("|") + ")$", "i").test(this.value.toLowerCase())) {
                    alert("选择文件错误,图片类型必须是" + opts.ImgType.join("，") + "中的一种");
                    this.value = "";
                    return false
                }
                if ($.browser.msie) {
                    try {
                        $("#" + opts.Img).attr('src', _self.getObjectURL(this.files[0]))
                    } catch (e) {
                        var src = "";
                        var obj = $("#" + opts.Img);
                        var div = obj.parent("div")[0];
                        _self.select();
                        if (top != self) {
                            window.parent.document.body.focus()
                        } else {
                            _self.blur()
                        }
                        src = document.selection.createRange().text;
                        document.selection.empty();
                        obj.hide();
                        obj.parent("div").css({
                            'filter': 'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)',
                            'width': opts.Width + 'px',
                            'height': opts.Height + 'px'
                        });
                        div.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = src
                    }
                } else {
                    $("#" + opts.Img).attr('src', _self.getObjectURL(this.files[0]))
                }
                opts.Callback()
            }
        })
    }
});


/*上传图片js*/		



    </script>
</head>
<body>
	<div class="mui-content count">
			<div class="mui-scroll-wrapper">
				<div class="mui-scroll">
					<div class="top">
						<div class="top_main_right">
								<img src="images/left.png"  class="mui-action-back">
						</div>
						<div class="clxx">投保信息</div>
					</div>
					<div><img class="bg" src="images/bg.gif" /></div>
					<div class="main">
						<div class="chezhu">
							<div class="tit"><span></span><samp>车主信息</samp></div>
							<p>车主姓名：<span>${car.owner}</span></p>
							<p>车主电话：<span>${car.ownerPhone}</span></p>
							<p>身份证号：<span>${car.ownerIdNumber}</span></p>
						</div>
						<div class="chezhu">
							<div class="tit"><span></span><samp>车辆信息</samp></div>
							<p>车牌号：<span>${car.plateNo}</span></p>
							<p>车架号：<span>${car.vin}</span></p>
							<p>发动机号：<span>${car.engineNo}</span></p>
							<p>注册日期：<span>${car.registered}</span></p>
							<p>车辆信息：<span>${car.models}</span></p>
						</div>
						<div class="chezhu">
							<div class="tit"><span></span><samp>保险选择</samp></div>
							<div class="baoxian_p">
								<p>交强险：<span style="color: #f06540;">￥<samp>${insuranceBJ.jqx}</samp></span></p>
								<p>交强险开始时间：<span>2015/3/28</span>&nbsp;<span>${insuranceBJ.trafficBeginDate}</span></p>
								<p>交强险截止时间：<span>2015/3/28</span>&nbsp;<span>${insuranceBJ.trafficEndDate}</span></p>
								<p>车船税：<span style="color: #f06540;">￥<samp>${insuranceBJ.ccs}</samp></span></p>
								<p>商业险开始时间：<span>2015/3/28</span>&nbsp;<span>${insuranceBJ.businessBeginDate}</span></p>
								<p>商业险截止时间：<span>2015/3/28</span>&nbsp;<span>${insuranceBJ.businessEndDate}</span></p>
								<p>车辆损失险：<span style="color: #f06540;">￥<samp>${insuranceBJ.clssx}</samp></span></p>
								<p>车辆损失险不计免配：<span style="color: #f06540;">￥<samp>${insuranceBJ.clssxMp}</samp></span></p>
							</div>
						</div>
						<div class="chezhu">
							<div class="tit"><span></span><samp>车主证件信息</samp></div>
							
							
							<!--    --->
							<div class="tb_xc">
								<p style="position:relative;"><i><img src="images/kuang.png" id="imagePreview" /></i><span>车主身份证正面照</span><input id="imageInput" type="file" name="myPhotoOne" style="position: absolute;left:0px; top:0px;width:45px;height:45px;opacity:0;" /></p>
							</div>
							
							<div class="tb_xc">
								<p style="position:relative;"><i><img src="images/kuang.png" id="imagePreviewa"/></i><span>车主身份证反面照</span><input id="imageInputa" type="file" name="myPhotoTwo" style="position: absolute;left:0px; top:0px;width:45px;height:45px;opacity:0;" /></p>								
							</div>
							
							<div class="tb_xc">
								<p style="position:relative;"><i><img src="images/kuang.png" id="imagePreviewb"/></i><span>行驶证正本</span><input id="imageInputb" type="file" name="myPhoto" onchange="loadImageFileb();" style="position: absolute;left:0px; top:0px;width:45px;height:45px;opacity:0;" /></p>	
							</div>
							
							<div class="tb_xc">
								<p style="position:relative;"><i><img src="images/kuang.png" id="imagePreviewc"/></i><span>行驶证副本</span><input id="imageInputc" type="file" name="myPhoto" onchange="loadImageFilec();" style="position: absolute;left:0px; top:0px;width:45px;height:45px;opacity:0;" /></p>	
							</div>
													<div class="tb_xc">
								<p style="position:relative;"><i><img src="images/kuang.png" id="imagePreviewd"/></i><span>行驶证副本</span><input id="imageInputd" type="file" name="myPhoto" onchange="loadImageFiled();" style="position: absolute;left:0px; top:0px;width:45px;height:45px;opacity:0;" /></p>	
							</div>
							<!--    --->
							
							
							<div class="tit"><span></span><samp>收件信息</samp><p class="tb_xz">选择</p><img src="images/right.png"/></div>
							<div class="inp">
								
								<!--  这里我改了的       -->
								
								<div><span>&nbsp;&nbsp;收件人：</span>
									<input type="text" placeholder="请输入收件人" id="shoujian"/>
								</div>
								<div><span>&nbsp;&nbsp;详细地址：</span>
									<input type="text" placeholder="请输入收件地址" id="dizhi"/>
								</div>
								<div><span>&nbsp;&nbsp;联系电话：</span>
									<input type="text" placeholder="请输入收件人电话" id="lianxi"/>
								</div>
								
								<!--  这里我改了的       -->
								
							</div>
							
							<!--  这里我改了的       -->
							
							<button class="chaxun" id="btyd">提交<img src="images/dui.png"/></button>
							
							<!--  这里我改了的       -->
						</div>
					</div>
				</div>
			</div>
	</div>			
</body>
<script>
	
</script>
</html>